<!DOCTYPE html>
<html lang="es">

	<head id="Head">
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
		<title> Ema Asesora Virtual - Página Interna</title>
		<link id="style" rel="stylesheet" type="text/css" href="emafiles/ax-style.css" />
		<link rel='SHORTCUT ICON' href='https://www.epm.com.co/site/Portals/0/favicon.ico?ver=2012-01-10-105006-000' type='image/x-icon' />
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
	</head>

	<body id="Body">

<!--	<div style="text-align: center;">
	<h1 class="ax-logo">Ema Asesora Virtual - Página Interna</h1>
	</div>
-->
	
<!--Inicia chat-->
<div class="container-chat-bot mostrarchat" >
    
    <!--<div id="wrapper" class="position-chat" style="left: 10px;">-->
        <div class="cabezote" id="cabezoteChat">
			<h1 class="titulo-ambiente">DESARROLLO</h1>
        </div>
        <!--Aqui se pega el controlador que llama el chat-->
            <div id="webchat-dllo" role="main" style="overflow-y: auto; height:451px; ">
				
                <script src="https://cdn.botframework.com/botframework-webchat/4.8.0/webchat.js"></script>
				
                <script>					
				
					(async function() {

						//const apiRequest_d = await fetch('https://func-epm-np-bot-atc-gentoken.azurewebsites.net/api/GenerateDLToken');
						//const { token } = await apiRequest_d.json();
						const secret = '96vCiA3peH8.AcLt6bpQngXDGCQsR7m2s0M7VUYjX5DQDQAzsyk5vZs';
						const res = await fetch('https://directline.botframework.com/v3/directline/tokens/generate', { 
							body: JSON.stringify({ user: { id: 'dl_user_id', name: 'username' }}),
							headers: {
							Authorization: `Bearer ${secret}`,
							'Content-type': 'application/json'
							},
						   method: 'POST',
						});
						const { token } = await res.json();


						window.WebChat.renderWebChat({
							directLine: window.WebChat.createDirectLine({ token }),
							locale: 'es-ES',
							styleOptions: {
								rootHeight: '100%',
								rootWidth: '100%',
								hideUploadButton: true
							}
						}, document.getElementById('webchat-dllo'));

					})().catch(err => console.error(err));	

                </script>
            </div>

    <!--</div>-->
</div>
<!--Finaliza chat-->

</body>

</html>